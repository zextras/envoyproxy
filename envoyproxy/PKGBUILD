# Please refer to the table below to check envoy and consul
# compatibility:
#   - https://www.consul.io/docs/connect/proxies/envoy

targets=(
  "centos"
  "ubuntu"
)
pkgname="envoyproxy"
pkgver="1.18.4"
pkgrel="1"
pkgdesc="A high performance, open source, general RPC framework that puts mobile and HTTP/2 first."
pkgdesclong=(
  "A high performance, open source, general RPC framework that puts mobile and HTTP/2 first."
)
maintainer="Zextras SRL <packages@zextras.com>"
arch="amd64"
url="https://www.zextras.com"
license=("Apache2")
section="utils"
provides=("getenvoy-envoy")
conflicts=("getenvoy-envoy")
sources=(
  "https://archive.tetratelabs.io/envoy/download/v${pkgver}/envoy-v${pkgver}-linux-amd64.tar.xz"
)
hashsums=(
  "844cbab986a7db11749105bed282c0c6787fde7f0ad28ac9171ed7406137db56"
)

package() {
  cd "${srcdir}/envoy-v${pkgver}-linux-amd64"
  install -d "${pkgdir}/usr/bin"
  install -m755 bin/envoy \
    "${pkgdir}/usr/bin/envoy"
}
